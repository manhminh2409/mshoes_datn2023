<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Dashboard - NiceAdmin Bootstrap Template</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!--CSS FILES-->
    <link rel="stylesheet" th:href="@{/assets/vendor/bootstrap/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/bootstrap/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/aos/aos.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/swiper/swiper-bundle.min.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/glightbox/css/glightbox.min.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/fontawesome/css/all.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/simple-datatables/style.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/fontawesome/css/all.css}">
    <link rel="stylesheet" th:href="@{/assets/css/admin-style.css}">

    <!--JAVASCRIPT FILES-->
    <script th:src="@{'https://unpkg.com/isotope-layout@3.0.6/dist/isotope.pkgd.js'}"></script>

</head>

<body>

      <!--NavBar-->
      <th:block th:replace="~{admin/fragments/navbar :: navbar}"></th:block>
      <!--Header-->
      <th:block th:replace="~{admin/fragments/header :: header}"></th:block>
      <main id="main" class="main">

        <div class="pagetitle">
          <h1>Sản phẩm</h1>
          <nav>
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a th:href="@{/admin}">Tổng quan</a></li>
              <li class="breadcrumb-item">Sản phẩm</li>
              <li class="breadcrumb-item active">Danh sách sản phẩm</li>
            </ol>
          </nav>
        </div><!-- End Page Title -->

        <section class="section">
          <div class="row">
            <div class="col-lg-12">

              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Danh sách sản phẩm</h5>

                  <div class="card-button d-flex justify-content-between pt-3">
                    <div class="btn">
                        <a th:href="@{/admin/product/create}">Thêm mới</a>
                    </div>

                    <div class="ei-file">
                        <div class="btn me-2">
                            <a href="#">Export</a>
                            <i class="fa-solid fa-download"></i>
                        </div>

                        <div class="btn">
                            <a href="#">Import</a>
                            <i class="fa-solid fa-upload"></i>
                        </div>
                    </div>
                  </div>

                  <div class="row pt-3">
                    <div class="col-lg-4">
                        <div class="search-bar pt-3">
                            <form class="search-form d-flex align-items-center" method="POST" action="#">
                            <input type="text" name="query" placeholder="Search" title="Enter search keyword">
                            <button type="submit" title="Search"><i class="fa-solid fa-magnifying-glass"></i></button>
                            </form>
                        </div><!-- End Search Bar -->
                    </div>

                    <div class="col-lg-5 offset-md-3">
                        <div class="number-item pt-3">

                            <select name="number-item" id="" class="form-select" aria-label="number-item">
                                <option value="1">5</option>
                                <option value="2">10</option>
                                <option value="3">15</option>
                                <option value="4">20</option>
                            </select>
                            <p class="d-inline-block"> sản phẩm trên một trang</p>
                        </div><!-- End Search Bar -->
                    </div>
                  </div>

                  <!-- Recent Sales -->
                <div class="col-12 recent-sales overflow-auto mt-5">
                  <table class="table table-striped datatable">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Ảnh</th>
                        <th scope="col">Tên sản phẩm</th>
                        <th scope="col">Mô tả</th>
                        <th scope="col">Giá bán</th>
                        <th scope="col">Lượt xem</th>
                        <th scope="col" colspan="2" class="text-center">Lựa chọn</th>
                      </tr>
                    </thead>
                    <tbody>
                    <tr th:each="product,index : ${products}">
                        <th scope="row"><a href="#" th:utext="${index.index+1}"></a></th>
                        <td>
                            <img th:src="@{${product.imageResponses[0].url}(timestamp=${#dates.createNow().getTime()})}" class="rounded" alt="">
                        </td>
                        <td>
                            <span  th:text="${product.name + ', '}"></span>
                            <span  th:text="${product.sku}" th:style="'font-weight: bold;'"></span>
                        </td>
                        <td th:text="${product.description}"></td>
                        <td>
                            <span th:if="${product.discountPrice != 0}" th:text="${product.discountPrice}"></span>
                            <span th:if="${product.discountPrice != 0}" th:text="'('+${product.price}+')'" th:style="'text-decoration:line-through; color:#959595; font-size: 14px;'"></span>
                            <span th:if="${product.discountPrice == 0}" th:text="${product.price}"></span>
                        </td>
                        <td th:utext="${product.visited}"></td>
                        <td><a href="#"><i class="fa-brands fa-autoprefixer"></i></a></td>
                    </tr>
                    </tbody>
                  </table>
                </div><!-- End Recent Sales -->

                <nav aria-label="Page navigation">
                  <ul class="pagination pt-3 d-flex justify-content-center">
                      <!-- Tính toán trang đầu tiên và trang cuối cùng -->
                      <th:block th:with="startPage=${currentPage > 5 ? currentPage - 5 : 0}, endPage=${currentPage < countProduct - 6 ? currentPage + 4 : countProduct - 1}">
                      <li th:class="${currentPage == startPage} ? 'disabled page-item' : 'page-item'">
                          <a th:href="@{/admin/product(pageNumber=${currentPage - 1}, pageSize=${pageSize})}" aria-label="Previous" class="page-link">
                              <span aria-hidden="true"><i class="fa-solid fa-chevron-left"></i></span>
                          </a>
                      </li>
                      <li th:each="page : ${#numbers.sequence(startPage, endPage)}" class="page-item">
                          <a th:href="@{/admin/product(pageNumber=${page}, pageSize=${pageSize})}" th:text="${page + 1}" th:class="${currentPage == page} ? 'active page-link' : 'page-link'"></a>

                      </li>
                      <li th:class="${currentPage == endPage} ? 'disabled page-item' : 'page-item'">
                          <a th:href="@{/admin/product(pageNumber=${currentPage + 1}, pageSize=${pageSize})}" aria-label="Next" class="page-link">
                              <span aria-hidden="true"><i class="fa-solid fa-chevron-right"></i></span>
                          </a>
                      </li>
                      </th:block>
                  </ul>
                </nav>
                </div>
              </div>

            </div>


          </div>
        </section>

      </main><!-- End #main -->


      <!-- ======= Footer ======= -->
      <footer id="footer" class="footer">
        <div class="copyright">
          &copy; Copyright <strong><span>NiceAdmin</span></strong>. All Rights Reserved
        </div>
        <div class="credits">
          <!-- All the links in the footer should remain intact. -->
          <!-- You can delete the links only if you purchased the pro version. -->
          <!-- Licensing information: https://bootstrapmade.com/license/ -->
          <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/ -->
          Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
        </div>
      </footer><!-- End Footer -->

      <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

     <!-- End Footer -->
     <div id="preloader"></div>


      <!--vendor-scripts.html-->
      <script th:src="@{/assets/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
      <script th:src="@{/assets/vendor/swiper/swiper-bundle.min.js}"></script>
      <script th:src="@{/assets/vendor/glightbox/js/glightbox.min.js}"></script>
      <script th:src="@{/assets/vendor/php-email-form/validate.js}"></script>
      <script th:src="@{/assets/vendor/apexcharts/apexcharts.min.js}"></script>
      <script th:src="@{/assets/vendor/chart.js/chart.min.js}"></script>
      <script th:src="@{/assets/vendor/echarts/echarts.min.js}"></script>
      <script th:src="@{/assets/vendor/simple-datatables/simple-datatables.js}"></script>
      <script th:src="@{/assets/vendor/tinymce/tinymce.min.js}"></script>
</body>

</html>